version: 0.2

phases:
  install:
    runtime-versions:
      python: 3.11
  build:
    commands:
      - echo "ðŸ“¦ Updating version in package.json"
      - VERSION="$MAJOR.$MINOR.$PATCH"
      - echo "âœ” Version from pipeline: $VERSION"
      
      # Use jq to update package.json version
      - jq --arg v "$VERSION" '.version = $v' package.json > tmp.json && mv tmp.json package.json
      
      - echo "ðŸ§¾ Contents of package.json after update:"
      - cat package.json

      - echo "ðŸš€ Running Python app..."
      - python app.py

artifacts:
  files:
    - '**/*'
